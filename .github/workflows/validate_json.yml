name: W3 JSON Validator (Veritas)

on:
  push:
    branches:
      - refactor/v0.2
  pull_request:
    branches:
      - refactor/v0.2
    types: [opened, synchronize, reopened]
    paths:
      # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
      - 'modules/identity/specs/w3_genesis_identity.json'
      - 'modules/treasury/specs/w3_multisig_config.json'
      - '.github/workflows/validate_json.yml'

jobs:
  validate_specs:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: Install JSON Parser (simplejson)
        run: pip install simplejson

      - name: üõ°Ô∏è Validate Critical JSON Syntax
        run: |
          echo "Veritas: Starting syntax check for Genesis Specs..."
          # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Identity Spec
          python -c "import simplejson as json; json.load(open('modules/identity/specs/w3_genesis_identity.json'))"
          echo "‚úÖ Identity Genesis JSON: Syntax OK"
          # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Treasury Spec
          python -c "import simplejson as json; json.load(open('modules/treasury/specs/w3_multisig_config.json'))"
          echo "‚úÖ Treasury Config JSON: Syntax OK"
        
      - name: ‚úÖ Report Success
        run: echo "Veritas: Critical JSON files passed validation. Data Integrity is maintained."
